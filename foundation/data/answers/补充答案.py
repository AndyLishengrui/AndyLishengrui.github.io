#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
补充建立根基课程答案数据
自动填充缺失的圣经经文答案
"""

import json
import os

# 圣经经文数据库（手动补充的重要经文）
BIBLE_VERSES = {
    # 创世记
    "创 1:10": "神称旱地为地，称水的聚处为海。神看着是好的。",
    "创 1:12": "于是地发生了青草和结种子的菜蔬，各从其类；并结果子的树木，各从其类，果子都包着核。神看着是好的。",
    "创 1:18": "管理昼夜，分别明暗。神看着是好的。",
    "创 1:21": "神就造出大鱼和水中所滋生各样有生命的动物，各从其类；又造出各样飞鸟，各从其类。神看着是好的。",
    "创 1:25": "于是神造出野兽，各从其类；牲畜，各从其类；地上一切昆虫，各从其类。神看着是好的。",
    "创 2:16,17": "耶和华神吩咐他说：园中各样树上的果子，你可以随意吃， 只是分别善恶树上的果子，你不可吃，因为你吃的日子必定死。",
    "创 2:17": "只是分别善恶树上的果子，你不可吃，因为你吃的日子必定死。",
    "创 3:1": "耶和华神所造的，惟有蛇比田野一切的活物更狡猾。蛇对女人说：神岂是真说不许你们吃园中所有树上的果子吗？",
    "创 3:6,7": "于是，女人见那棵树的果子好作食物，也悦人的眼目，且是可喜爱的，能使人有智慧，就摘下果子来吃了；又给她丈夫，她丈夫也吃了。 他们二人的眼睛就明亮了，才知道自己是赤身露体，便拿无花果树的叶子，为自己编做裙子。",
    "创 3:7": "他们二人的眼睛就明亮了，才知道自己是赤身露体，便拿无花果树的叶子，为自己编做裙子。",
    "创 3:8": "天起了凉风，耶和华神在园中行走。那人和他妻子听见神的声音，就藏在园里的树木中，躲避耶和华神的面。",
    "创 3:8,9": "天起了凉风，耶和华神在园中行走。那人和他妻子听见神的声音，就藏在园里的树木中，躲避耶和华神的面。 耶和华神呼唤那人，对他说：你在哪里？",
    "创 3:10": "他说：我在园中听见你的声音，我就害怕，因为我赤身露体，我便藏了。",
    "创 3:11-13": "耶和华说：谁告诉你赤身露体呢？莫非你吃了我吩咐你不可吃的那树上的果子吗？ 那人说：你所赐给我、与我同居的女人，她把那树上的果子给我，我就吃了。 耶和华神对女人说：你做的是什么事呢？女人说：那蛇引诱我，我就吃了。",
    "创 3:21": "耶和华神为亚当和他妻子用皮子做衣服给他们穿。",
    
    # 出埃及记
    "出 14:22-28": "以色列人下海中走干地，水在他们的左右作了墙垣。 埃及人追赶他们，法老一切的马匹、车辆和马兵都跟着下到海中。 到了晨更的时候，耶和华从云柱火柱中向埃及的军兵观看，使埃及的军兵混乱了， 又使他们的车轮脱落，难以行走，以致埃及人说：我们从以色列人面前逃跑吧！因为耶和华为他们攻击我们了。 耶和华对摩西说：你向海伸杖，叫水仍合在埃及人并他们的车辆、马兵身上。 摩西就向海伸杖，到了天一亮，海水仍旧复原。埃及人避水逃跑的时候，耶和华把他们推翻在海中， 水就回流，淹没了车辆和马兵。那些跟着以色列人下海法老的全军，连一个也没有剩下。",
    "出 20:3": "除了我以外，你不可有别的神。",
    "出 20:4-6": "不可为自己雕刻偶像；也不可做什么形像仿佛上天、下地和地底下、水中的百物。 不可跪拜那些像；也不可事奉它，因为我耶和华你的神，是忌邪的神。恨我的，我必追讨他的罪，自父及子，直到三四代； 爱我、守我诫命的，我必向他们发慈爱，直到千代。",
    "出 20:7": "不可妄称耶和华你神的名；因为妄称耶和华名的，耶和华必不以他为无罪。",
    "出 20:8-10": "当记念安息日，守为圣日。 六日要劳碌做你一切的工， 但第七日是向耶和华你神当守的安息日。这一日你和你的儿女、仆婢、牲畜，并你城里寄居的客旅，无论何工都不可做；",
    "出 20:12": "当孝敬父母，使你的日子在耶和华你神所赐你的地上得以长久。",
    "出 20:13": "不可杀人。",
    "出 20:14": "不可奸淫。",
    "出 20:15": "不可偷盗。",
    "出 20:16": "不可作假见证陷害人。",
    "出 20:17": "不可贪恋人的房屋；也不可贪恋人的妻子、仆婢、牛驴，并他一切所有的。",
    
    # 民数记  
    "民 5:6,7": "你晓谕以色列人说：无论男女，若犯了人所常犯的罪，以致干犯耶和华，那人就有了罪。 他要承认所犯的罪，将所亏负人的，如数赔还，另外加上五分之一，也归与所亏负的人。",
    
    # 申命记
    "申命记 30:15-16": "看哪，我今日将生与福、死与祸陈明在你面前。 吩咐你爱耶和华你的神，遵行他的道，谨守他的诫命、律例、典章，使你可以存活，人数增多，耶和华你神就必在你所要进去得为业的地上赐福与你。",
    
    # 箴言
    "箴 28:13": "遮掩自己罪过的，必不亨通；承认离弃罪过的，必蒙怜恤。",
    
    # 利未记
    "利 11:45": "我是把你们从埃及地领出来的耶和华，要作你们的神；所以你们要圣洁，因为我是圣洁的。",
    
    # 以赛亚书
    "赛 53:5": "哪知他为我们的过犯受害，为我们的罪孽压伤。因他受的刑罚，我们得平安；因他受的鞭伤，我们得医治。",
    "赛 53:6": "我们都如羊走迷，各人偏行己路，耶和华使我们众人的罪孽都归在他身上。",
    "赛 59:1,2": "耶和华的膀臂并非缩短，不能拯救，耳朵并非发沉，不能听见， 但你们的罪孽使你们与神隔绝；你们的罪恶使他掩面不听你们。",
    
    # 耶利米书
    "耶 17:9": "人心比万物都诡诈，坏到极处，谁能识透呢？",
    
    # 希伯来书
    "来 4:15": "因我们的大祭司并非不能体恤我们的软弱，他也曾凡事受过试探，与我们一样，只是他没有犯罪。",
    "来 6:1-2": "所以，我们应当离开基督道理的开端，竭力进到完全的地步，不必再立根基，就如那懊悔死行、信靠神、 各样洗礼、按手之礼、死人复活，以及永远审判各等教训。",
    "来 9:22": "按着律法，凡物差不多都是用血洁净的，若不流血，罪就不得赦免了。",
    "来 9:27": "按着定命，人人都有一死，死后且有审判。",
    "来 10:4": "因为公牛和山羊的血，断不能除罪。",
    
    # 启示录
    "启 1:5": "并那诚实作见证的，从死里首先复活，为世上君王元首的耶稣基督，有恩惠、平安归与你们！他爱我们，用自己的血使我们脱离罪恶，",
    "启 20:11-15": "我又看见一个白色的大宝座与坐在上面的，从他面前天地都逃避，再无可见之处了。 我又看见死了的人，无论大小，都站在宝座前。案卷展开了，并且另有一卷展开，就是生命册。死了的人都凭着这些案卷所记载的，照他们所行的受审判。 于是海交出其中的死人，死亡和阴间也交出其中的死人。他们都照各人所行的受审判。 死亡和阴间也被扔在火湖里，这火湖就是第二次的死。 若有人名字没记在生命册上，他就被扔在火湖里。",
    "启 21:8": "惟有胆怯的、不信的、可憎的、杀人的、淫乱的、行邪术的、拜偶像的和一切说谎话的，他们的分就在烧着硫磺的火湖里，这是第二次的死。",
    
    # 约翰一书
    "约壹 1:5": "神就是光，在他毫无黑暗。这是我们从主所听见、又报给你们的信息。",
    "约壹 1:6": "我们若说是与神相交，却仍在黑暗里行，就是说谎话，不行真理了。",
    "约壹 1:7": "我们若在光明中行，如同神在光明中，就彼此相交，他儿子耶稣的血也洗净我们一切的罪。",
    "约壹 2:3,4": "我们若遵守他的诫命，就晓得是认识他。 人若说我认识他，却不遵守他的诫命，便是说谎话的，真理也不在他心里了。",
    "约壹 2:9-11": "人若说自己在光明中，却恨他的弟兄，他到如今还是在黑暗里。 爱弟兄的，就是住在光明中，在他并没有绊跌的缘由。 惟独恨弟兄的，是在黑暗里，且在黑暗里行，也不知道往哪里去，因为黑暗叫他眼睛瞎了。",
    "约壹 3:7-10": "小子们哪，不要被人诱惑。行义的才是义人，正如主是义的一样。 犯罪的是属魔鬼，因为魔鬼从起初就犯罪。神的儿子显现出来，为要除灭魔鬼的作为。 凡从神生的，就不犯罪，因神的道存在他心里；他也不能犯罪，因为他是由神生的。 从此就显出谁是神的儿女，谁是魔鬼的儿女。凡不行义的就不属神，不爱弟兄的也是如此。",
    "约壹 3:9": "凡从神生的，就不犯罪，因神的道存在他心里；他也不能犯罪，因为他是由神生的。",
    "约壹 3:11": "我们应当彼此相爱。这就是你们从起初所听见的命令。",
    "约壹 3:14": "我们因为爱弟兄，就晓得是已经出死入生了。没有爱心的，仍住在死中。",
    "约壹 4:7": "亲爱的弟兄啊，我们应当彼此相爱，因为爱是从神来的。凡有爱心的，都是由神而生，并且认识神。",
    "约壹 4:20": "人若说我爱神，却恨他的弟兄，就是说谎话的；不爱他所看见的弟兄，就不能爱没有看见的神。",
    "约壹 5:4": "因为凡从神生的，就胜过世界；使我们胜了世界的，就是我们的信心。",
    "约壹 5:4,5": "因为凡从神生的，就胜过世界；使我们胜了世界的，就是我们的信心。 胜过世界的是谁呢？不是那信耶稣是神儿子的吗？",
    
    # 彼得前书
    "彼前 1:23": "你们蒙了重生，不是由于能坏的种子，乃是由于不能坏的种子，是藉着神活泼常存的道。",
    "彼前 2:24": "他被挂在木头上，亲身担当了我们的罪，使我们既然在罪上死，就得以在义上活。因他受的鞭伤，你们便得了医治。",
    "彼前 3:21": "这水所表明的洗礼，现在藉着耶稣基督复活，也拯救你们；这洗礼本不在乎除掉肉体的污秽，只求在神面前有无亏的良心。",
    "彼前 3:20,21": "就是那从前在挪亚预备方舟、神容忍等待的时候，不信从的人。当时进入方舟，藉着水得救的不多，只有八个人。 这水所表明的洗礼，现在藉着耶稣基督复活，也拯救你们；这洗礼本不在乎除掉肉体的污秽，只求在神面前有无亏的良心。",
    "请阅读彼得前书 3:20,21": "就是那从前在挪亚预备方舟、神容忍等待的时候，不信从的人。当时进入方舟，藉着水得救的不多，只有八个人。 这水所表明的洗礼，现在藉着耶稣基督复活，也拯救你们；这洗礼本不在乎除掉肉体的污秽，只求在神面前有无亏的良心。",
    
    # 使徒行传
    "使徒行传 2:38": "彼得说：你们各人要悔改，奉耶稣基督的名受洗，叫你们的罪得赦，就必领受所赐的圣灵；",
    "使徒行传 3:19": "所以，你们当悔改归正，使你们的罪得以涂抹，这样，那安舒的日子就必从主面前来到；",
    "使徒行传 22:16": "现在你为什么耽延呢？起来！求告他的名受洗，洗去你的罪。",
    "使徒行传 26:18-20": "要叫他们的眼睛得开，从黑暗中归向光明，从撒但权下归向神；又因信我，得蒙赦罪，和一切成圣的人同得基业。 亚基帕王啊，我故此没有违背那从天上来的异象， 先在大马士革，后在耶路撒冷和犹太全地，以及外邦，劝勉他们应当悔改归向神，行事与悔改的心相称。",
    "阅读使徒行传 2:36-46": "故此，以色列全家当确实的知道，你们钉在十字架上的这位耶稣，神已经立他为主，为基督了。 众人听见这话，觉得扎心，就对彼得和其余的使徒说：弟兄们，我们当怎样行？ 彼得说：你们各人要悔改，奉耶稣基督的名受洗，叫你们的罪得赦，就必领受所赐的圣灵； 因为这应许是给你们和你们的儿女，并一切在远方的人，就是主我们神所召来的。 彼得还用许多话作见证，劝勉他们说：你们当救自己脱离这弯曲的世代。 于是领受他话的人就受了洗。那一天，门徒约添了三千人， 都恒心遵守使徒的教训，彼此交接，擘饼，祈祷。 众人都惧怕；使徒又行了许多奇事神迹。 信的人都在一处，凡物公用， 并且卖了田产、家业，照各人所需用的分给各人。 他们天天同心合意恒切的在殿里，且在家中擘饼，存着欢喜、诚实的心用饭， 赞美神，得众民的喜爱。主将得救的人天天加给他们。",
    "请阅读使徒行传 26:18-20": "要叫他们的眼睛得开，从黑暗中归向光明，从撒但权下归向神；又因信我，得蒙赦罪，和一切成圣的人同得基业。 亚基帕王啊，我故此没有违背那从天上来的异象， 先在大马士革，后在耶路撒冷和犹太全地，以及外邦，劝勉他们应当悔改归向神，行事与悔改的心相称。",
    
    # 以西结书
    "结 36:26": "我也要赐给你们一个新心，将新灵放在你们里面，又从你们的肉体中除掉石心，赐给你们肉心。",
    
    # 路加福音
    "路加福音 6:46-48": "你们为什么称呼我主啊，主啊，却不遵我的话行呢？ 凡到我这里来，听见我的话就去行的，我要告诉你们他像什么人： 他像一个人盖房子，深深地挖地，把根基安在磐石上；到发大水的时候，水冲那房子，房子总不能摇动，因为根基立在磐石上。",
    "阅读路加福音 15:11-24": "耶稣又说：一个人有两个儿子。 小儿子对父亲说：父亲，请你把我应得的家业分给我。他父亲就把产业分给他们。 过了不多几日，小儿子就把他一切所有的都收拾起来，往远方去了。在那里任意放荡，浪费资财。 既耗尽了一切所有的，又遇着那地方大遭饥荒，就穷苦起来。 于是去投靠那地方的一个人；那人打发他到田里去放猪。 他恨不得拿猪所吃的豆荚充饥，也没有人给他。 他醒悟过来，就说：我父亲有多少的雇工，口粮有余，我倒在这里饿死吗？ 我要起来，到我父亲那里去，向他说：父亲！我得罪了天，又得罪了你； 从今以后，我不配称为你的儿子，把我当作一个雇工吧！ 于是起来，往他父亲那里去。相离还远，他父亲看见，就动了慈心，跑去抱着他的颈项，连连与他亲嘴。 儿子说：父亲！我得罪了天，又得罪了你；从今以后，我不配称为你的儿子。 父亲却吩咐仆人说：把那上好的袍子快拿出来给他穿；把戒指戴在他指头上；把鞋穿在他脚上； 把那肥牛犊牵来宰了，我们可以吃喝快乐； 因为我这个儿子是死而复活，失而又得的。他们就快乐起来。",
    
    # 约翰福音
    "约翰福音 14:15": "你们若爱我，就必遵守我的命令。",
    "约翰福音 14:26": "但保惠师，就是父因我的名所要差来的圣灵，他要将一切的事指教你们，并且要叫你们想起我对你们所说的一切话。",
    
    # 马太福音
    "马太福音 3:11": "我是用水给你们施洗，叫你们悔改。但那在我以后来的，能力比我更大，我就是给他提鞋也不配。他要用圣灵与火给你们施洗。",
    
    # 雅各书
    "雅 2:19,20": "你信神只有一位，你信的不错；鬼魔也信，却是战惊。 虚浮的人哪，你愿意知道没有行为的信心是死的吗？",
    "雅 2:26": "身体没有灵魂是死的，信心没有行为也是死的。",
    
    # 罗马书
    "阅读罗马书 6:1-4": "这样，怎么说呢？我们可以仍在罪中、叫恩典显多吗？ 断乎不可！我们在罪上死了的人岂可仍在罪中活着呢？ 岂不知我们这受洗归入基督耶稣的人是受洗归入他的死吗？ 所以，我们藉着洗礼归入死，和他一同埋葬，原是叫我们一举一动有新生的样式，像基督藉着父的荣耀从死里复活一样。",
}

def update_answer_file(filepath):
    """更新单个答案文件"""
    with open(filepath, 'r', encoding='utf-8') as f:
        data = json.load(f)
    
    updated = False
    for key, answer in data['answers'].items():
        if not answer['has_data'] and answer['reference'] in BIBLE_VERSES:
            answer['text'] = BIBLE_VERSES[answer['reference']]
            answer['has_data'] = True
            if 'note' in answer:
                del answer['note']
            updated = True
            print(f"  更新: {answer['reference']}")
    
    if updated:
        with open(filepath, 'w', encoding='utf-8') as f:
            json.dump(data, f, ensure_ascii=False, indent=2)
        return True
    return False

def main():
    """主函数"""
    answers_dir = os.path.dirname(os.path.abspath(__file__))
    
    # 只处理第1-3课
    lessons_to_process = []
    for i in range(1, 4):  # 第1-3课
        lessons_to_process.extend([
            f for f in os.listdir(answers_dir) 
            if f.startswith(f'foundation_L{i}_') and f.endswith('.json')
        ])
    
    lessons_to_process.sort()
    
    print("开始补充第1-3课答案数据...")
    print(f"找到 {len(lessons_to_process)} 个文件需要处理\n")
    
    updated_count = 0
    for filename in lessons_to_process:
        filepath = os.path.join(answers_dir, filename)
        print(f"处理: {filename}")
        if update_answer_file(filepath):
            updated_count += 1
        print()
    
    print(f"\n完成！共更新了 {updated_count} 个文件")

if __name__ == '__main__':
    main()
